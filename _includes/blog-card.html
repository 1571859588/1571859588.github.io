{% assign cover_image = "" %}
{% assign post_content_html = post.content | markdownify %}
{% if post_content_html contains '<img src="' %}
  {% assign image_url = post_content_html | split: '<img src="' | last | split: '"' | first %}
  {% assign cover_image = image_url %}
{% elsif post.header.teaser %}
  {% if post.header.teaser contains " ://" %} {% assign cover_image=post.header.teaser %} {% else %} {% assign
    cover_image=post.header.teaser | prepend: "/images/" | prepend: base_path %} {% endif %} {% endif %} <div
    class="blog-card" id="post-{{ post.id | slugify }}">
<a href="{{ post.url | relative_url }}" class="blog-card-link">
    <div class="blog-card-cover" {% if cover_image !="" %}style="background-image: url('{{ cover_image }}');" {% endif
        %}>
        {% if cover_image == "" %}
        <div class="blog-card-placeholder">
            <i class="fa fa-newspaper-o" aria-hidden="true"></i>
        </div>
        {% endif %}
    </div>

    <div class="blog-card-body">
        <h3 class="blog-card-title">{{ post.title }}</h3>

        <div class="blog-card-meta">
            <i class="fa fa-calendar" aria-hidden="true"></i>
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%B %d, %Y" }}</time>

            {% if post.read_time %}
            &nbsp;&middot;&nbsp; <i class="fa fa-clock-o" aria-hidden="true"></i> {% include read-time.html %}
            {% endif %}
        </div>

        <p class="blog-card-excerpt">
            {% if post.excerpt %}
            {{ post.excerpt | strip_html | truncatewords: 25 }}
            {% else %}
            {{ post.content | strip_html | truncatewords: 25 }}
            {% endif %}
        </p>

        {% if post.tags.size > 0 %}
        <div class="blog-card-tags">
            {% for tag in post.tags limit: 3 %}
            <span class="blog-card-tag"><i class="fa fa-tag" aria-hidden="true"></i> {{ tag }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</a>
</div>

<style>
    .blog-card {
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        height: 100%;
        display: flex;
        flex-direction: column;
        position: relative;
        scroll-margin-top: 100px;
        /* Offset for smooth scroll */
    }

    .blog-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
    }

    .blog-card.highlight {
        animation: highlightPulse 2s ease-out forwards;
    }

    @keyframes highlightPulse {
        0% {
            box-shadow: 0 0 0 0px rgba(74, 144, 226, 0.7);
            border: 2px solid #4a90e2;
        }

        50% {
            box-shadow: 0 0 0 15px rgba(74, 144, 226, 0);
            border: 2px solid #4a90e2;
        }

        100% {
            box-shadow: 0 0 0 0 rgba(74, 144, 226, 0);
            border: 2px solid transparent;
        }
    }

    .blog-card-link {
        text-decoration: none !important;
        color: inherit !important;
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .blog-card-cover {
        height: 180px;
        background-size: cover;
        background-position: center;
        background-color: #f8f9fa;
        position: relative;
    }

    .blog-card-placeholder {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #6e8efb, #a777e3);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 3rem;
        opacity: 0.8;
    }

    .blog-card-body {
        padding: 20px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }

    .blog-card-title {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.25rem;
        font-weight: 600;
        line-height: 1.4;
        color: #333;
    }

    .blog-card-meta {
        font-size: 0.8rem;
        color: #888;
        margin-bottom: 15px;
    }

    .blog-card-excerpt {
        font-size: 0.95rem;
        color: #555;
        line-height: 1.6;
        flex-grow: 1;
        margin-bottom: 20px;
    }

    .blog-card-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: auto;
    }

    .blog-card-tag {
        font-size: 0.75rem;
        background: #f1f3f5;
        color: #495057;
        padding: 4px 10px;
        border-radius: 20px;
    }
</style>